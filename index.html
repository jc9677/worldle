<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W🌎RLDle (wordle-game6) </title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #121213;
            color: #ffffff;
        }
        .game-grid {
            display: grid;
            grid-template-rows: repeat(6, 1fr);
            gap: 5px;
            margin-bottom: 30px;
        }
        .grid-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
        }
        .tile {
            width: 62px;
            height: 62px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            border: 2px solid #3a3a3c;
            text-transform: uppercase;
        }
        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 8px;
            padding: 0 8px;
            max-width: 100vw;
            margin: 0 auto;
        }
        .keyboard-row {
            display: flex;
            justify-content: center;
            gap: 6px;
        }
        .key {
            min-width: 43px;
            height: 58px;
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            background: #818384;
            flex: 1;
        }
        .key.wide {
            min-width: 65px;
            flex: 1.5;
        }
        .tile.correct, .key.correct {
            background: #538d4e !important;
            border-color: #538d4e;
        }
        .tile.present, .key.present {
            background: #b59f3b !important;
            border-color: #b59f3b;
        }
        .tile.absent, .key.absent {
            background: #3a3a3c !important;
            border-color: #3a3a3c;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin: 20px auto;
            max-width: 400px;
            text-align: center;
        }
        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .stat-value {
            font-size: 36px;
            font-weight: bold;
        }
        .stat-label {
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        // Word list
        const WORDS = ['REACT', 'BUILD', 'CODES', 'WORLD', 'GAMES', 'RAISE', 'GREAT'];
        
        const getTodaysWord = () => {
            const today = new Date();
            const index = (today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate()) % WORDS.length;
            return WORDS[index];
        };

        function App() {
            const [state, setState] = React.useState(() => {
                const saved = localStorage.getItem('wordleState');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    if (parsed.targetWord !== getTodaysWord()) {
                        return {
                            board: Array(6).fill().map(() => Array(5).fill('')),
                            currentRow: 0,
                            currentCol: 0,
                            gameOver: false,
                            won: false,
                            targetWord: getTodaysWord(),
                            letterStates: {},
                        };
                    }
                    return parsed;
                }
                return {
                    board: Array(6).fill().map(() => Array(5).fill('')),
                    currentRow: 0,
                    currentCol: 0,
                    gameOver: false,
                    won: false,
                    targetWord: getTodaysWord(),
                    letterStates: {},
                };
            });

            const [stats, setStats] = React.useState(() => {
                const saved = localStorage.getItem('wordleStats');
                return saved ? JSON.parse(saved) : {
                    gamesPlayed: 0,
                    gamesWon: 0,
                    currentStreak: 0,
                    maxStreak: 0,
                    lastPlayed: null,
                };
            });

            React.useEffect(() => {
                localStorage.setItem('wordleState', JSON.stringify(state));
            }, [state]);

            React.useEffect(() => {
                localStorage.setItem('wordleStats', JSON.stringify(stats));
            }, [stats]);

            React.useEffect(() => {
                const handleKeyDown = (e) => {
                    if (e.key === 'Enter') {
                        handleInput('ENTER');
                    } else if (e.key === 'Backspace') {
                        handleInput('BACKSPACE');
                    } else if (/^[A-Za-z]$/.test(e.key)) {
                        handleInput(e.key.toUpperCase());
                    }
                };
                window.addEventListener('keydown', handleKeyDown);
                return () => window.removeEventListener('keydown', handleKeyDown);
            }, [state]);

            const handleInput = (key) => {
                if (state.gameOver) return;

                if (key === 'ENTER') {
                    if (state.currentCol === 5) {
                        const guess = state.board[state.currentRow].join('');
                        if (!WORDS.includes(guess)) {
                            alert('Not in word list!');
                            return;
                        }
                        
                        const newLetterStates = { ...state.letterStates };
                        const targetWord = state.targetWord;
                        
                        for (let i = 0; i < 5; i++) {
                            const letter = guess[i];
                            if (letter === targetWord[i]) {
                                newLetterStates[letter] = 'correct';
                            } else if (targetWord.includes(letter)) {
                                if (newLetterStates[letter] !== 'correct') {
                                    newLetterStates[letter] = 'present';
                                }
                            } else {
                                if (!newLetterStates[letter]) {
                                    newLetterStates[letter] = 'absent';
                                }
                            }
                        }

                        const won = guess === targetWord;
                        const gameOver = won || state.currentRow === 5;

                        if (gameOver) {
                            const newStats = {
                                ...stats,
                                gamesPlayed: stats.gamesPlayed + 1,
                                gamesWon: stats.gamesWon + (won ? 1 : 0),
                                currentStreak: won ? stats.currentStreak + 1 : 0,
                                maxStreak: won ? Math.max(stats.currentStreak + 1, stats.maxStreak) : stats.maxStreak,
                                lastPlayed: new Date().toISOString(),
                            };
                            setStats(newStats);
                        }

                        setState({
                            ...state,
                            currentRow: state.currentRow + 1,
                            currentCol: 0,
                            letterStates: newLetterStates,
                            gameOver,
                            won,
                        });
                    }
                } else if (key === 'BACKSPACE') {
                    if (state.currentCol > 0) {
                        const newBoard = [...state.board];
                        newBoard[state.currentRow][state.currentCol - 1] = '';
                        setState({
                            ...state,
                            board: newBoard,
                            currentCol: state.currentCol - 1,
                        });
                    }
                } else if (state.currentCol < 5) {
                    const newBoard = [...state.board];
                    newBoard[state.currentRow][state.currentCol] = key;
                    setState({
                        ...state,
                        board: newBoard,
                        currentCol: state.currentCol + 1,
                    });
                }
            };

            const getTileClass = (row, col) => {
                const baseClass = 'tile';
                if (row >= state.currentRow) return baseClass;
                
                const letter = state.board[row][col];
                if (letter === state.targetWord[col]) return `${baseClass} correct`;
                if (state.targetWord.includes(letter)) return `${baseClass} present`;
                return `${baseClass} absent`;
            };

            const getKeyClass = (key) => {
                const baseClass = key.length > 1 ? 'key wide' : 'key';
                return `${baseClass} ${state.letterStates[key] || ''}`;
            };

            const handleShare = () => {
                if (!state.gameOver) return;

                let result = `Wordle Clone ${state.won ? state.currentRow : 'X'}/6\n\n`;
                for (let i = 0; i < state.currentRow; i++) {
                    const row = state.board[i];
                    for (let j = 0; j < 5; j++) {
                        const letter = row[j];
                        if (letter === state.targetWord[j]) {
                            result += '🟩';
                        } else if (state.targetWord.includes(letter)) {
                            result += '🟨';
                        } else {
                            result += '⬛';
                        }
                    }
                    result += '\n';
                }

                navigator.clipboard.writeText(result)
                    .then(() => alert('Results copied to clipboard!'))
                    .catch(() => alert('Failed to copy results'));
            };

            return (
                <div className="container mx-auto px-4 py-8 max-w-md">
                    <h1 className="text-4xl font-bold text-center mb-8">W🌎RLDle</h1>
                    
                    <div className="game-grid">
                        {state.board.map((row, i) => (
                            <div key={i} className="grid-row">
                                {row.map((letter, j) => (
                                    <div key={j} className={getTileClass(i, j)}>
                                        {letter}
                                    </div>
                                ))}
                            </div>
                        ))}
                    </div>

                    <div className="keyboard">
                        {[
                            ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],
                            ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],
                            ['ENTER', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', 'BACKSPACE']
                        ].map((row, i) => (
                            <div key={i} className="keyboard-row">
                                {row.map(key => (
                                    <button
                                        key={key}
                                        className={getKeyClass(key)}
                                        onClick={() => handleInput(key)}
                                    >
                                        {key === 'BACKSPACE' ? '←' : key}
                                    </button>
                                ))}
                            </div>
                        ))}
                    </div>

                    {state.gameOver && (
                        <div className="mt-8 text-center">
                            <p className="text-xl mb-4">
                                {state.won ? 'Congratulations!' : `The word was: ${state.targetWord}`}
                            </p>
                            <button
                                className="bg-green-600 text-white px-6 py-2 rounded-lg mb-6"
                                onClick={handleShare}
                            >
                                Share Results
                            </button>
                            <div className="stats">
                                <div className="stat-item">
                                    <div className="stat-value">{stats.gamesPlayed}</div>
                                    <div className="stat-label">Played</div>
                                </div>
                                <div className="stat-item">
                                    <div className="stat-value">
                                        {Math.round((stats.gamesWon / stats.gamesPlayed) * 100) || 0}%
                                    </div>
                                    <div className="stat-label">Win Rate</div>
                                </div>
                                <div className="stat-item">
                                    <div className="stat-value">{stats.currentStreak}</div>
                                    <div className="stat-label">Current Streak</div>
                                </div>
                                <div className="stat-item">
                                    <div className="stat-value">{stats.maxStreak}</div>
                                    <div className="stat-label">Max Streak</div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
